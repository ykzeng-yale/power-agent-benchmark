{
  "tier": 1,
  "name": "Basic Comparisons",
  "description": "Fundamental power analysis for basic statistical tests",
  "tasks": [
    {
      "id": "t1-ttest-001",
      "template": "two_sample_ttest",
      "difficulty": "basic",
      "question": "I want to compare mean blood pressure between treatment and control groups. I expect a medium effect size (Cohen's d = 0.5), want 80% power at alpha = 0.05 using a two-sided test. How many participants do I need per group?",
      "expected_template": "two_sample_ttest",
      "ground_truth": {
        "sample_size_per_group": 64,
        "total_sample_size": 128,
        "effect_size_d": 0.5,
        "power": 0.8,
        "alpha": 0.05
      },
      "tolerance": {
        "sample_size": 10,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette (Example 12: Two-Sample t-Test)",
      "reference_code": "library(pwr)\npwr.t.test(d = 0.5, sig.level = 0.05, power = 0.80, type = 'two.sample', alternative = 'two.sided')\n# n = 63.77 per group, round up to 64\n# Source: https://cran.r-project.org/web/packages/pwr/vignettes/pwr-vignette.html"
    },
    {
      "id": "t1-ttest-002",
      "template": "two_sample_ttest",
      "difficulty": "basic",
      "question": "Testing if a new drug reduces cholesterol. Expected reduction is 15 mg/dL with SD of 30 mg/dL in both groups. I need 90% power with two-sided alpha = 0.05. What sample size per group?",
      "expected_template": "two_sample_ttest",
      "ground_truth": {
        "sample_size_per_group": 86,
        "total_sample_size": 172,
        "effect_size_d": 0.5,
        "power": 0.9,
        "alpha": 0.05
      },
      "tolerance": {
        "sample_size": 10,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\nd <- 15/30  # effect size = difference/SD = 0.5\npwr.t.test(d = 0.5, sig.level = 0.05, power = 0.90, type = 'two.sample')\n# n = 85.03 per group, round up to 86"
    },
    {
      "id": "t1-ttest-003",
      "template": "two_sample_ttest",
      "difficulty": "intermediate",
      "question": "Comparing pain scores between two treatments. We expect a small effect (d = 0.3). With 80% power and alpha = 0.05, how many patients per arm for a one-sided test (we expect new treatment to be better)?",
      "expected_template": "two_sample_ttest",
      "ground_truth": {
        "sample_size_per_group": 139,
        "total_sample_size": 278,
        "effect_size_d": 0.3,
        "power": 0.8,
        "alpha": 0.05
      },
      "tolerance": {
        "sample_size": 14,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\npwr.t.test(d = 0.3, sig.level = 0.05, power = 0.80, type = 'two.sample', alternative = 'greater')\n# n = 138.08 per group, round up to 139"
    },
    {
      "id": "t1-ttest-004",
      "template": "two_sample_ttest",
      "difficulty": "intermediate",
      "question": "We're comparing anxiety scores between CBT therapy and waitlist control. The expected mean difference is 8 points with pooled SD of 12. Using alpha = 0.01 and 90% power (two-sided), calculate the required sample size per group.",
      "expected_template": "two_sample_ttest",
      "ground_truth": {
        "sample_size_per_group": 69,
        "total_sample_size": 138,
        "effect_size_d": 0.667,
        "power": 0.9,
        "alpha": 0.01
      },
      "tolerance": {
        "sample_size": 10,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\nd <- 8/12  # effect size = 0.667\npwr.t.test(d = 0.667, sig.level = 0.01, power = 0.90, type = 'two.sample')\n# n = 68.11 per group, round up to 69"
    },
    {
      "id": "t1-ttest-005",
      "template": "two_sample_ttest",
      "difficulty": "advanced",
      "question": "Planning an RCT comparing continuous glucose monitors vs standard monitoring for HbA1c. Expected difference is 0.4% with SD of 1.0%. We want 95% power, alpha = 0.025 (one-sided, superiority). How many per group?",
      "expected_template": "two_sample_ttest",
      "ground_truth": {
        "sample_size_per_group": 164,
        "total_sample_size": 328,
        "effect_size_d": 0.4,
        "power": 0.95,
        "alpha": 0.025
      },
      "tolerance": {
        "sample_size": 16,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\nd <- 0.4/1.0\npwr.t.test(d = 0.4, sig.level = 0.025, power = 0.95, type = 'two.sample', alternative = 'greater')\n# n = 163.12 per group, round up to 164"
    },
    {
      "id": "t1-ttest-006",
      "template": "two_sample_ttest",
      "difficulty": "advanced",
      "question": "A pharmaceutical company needs to detect a large effect (d = 0.8) in a confirmatory phase III trial. They require 99% power with alpha = 0.001 (two-sided) for regulatory purposes. What's the sample size per treatment arm?",
      "expected_template": "two_sample_ttest",
      "ground_truth": {
        "sample_size_per_group": 102,
        "total_sample_size": 204,
        "effect_size_d": 0.8,
        "power": 0.99,
        "alpha": 0.001
      },
      "tolerance": {
        "sample_size": 10,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\npwr.t.test(d = 0.8, sig.level = 0.001, power = 0.99, type = 'two.sample')\n# n = 101.11 per group, round up to 102"
    },
    {
      "id": "t1-paired-001",
      "template": "paired_ttest",
      "difficulty": "basic",
      "question": "I'm measuring patients' depression scores before and after 8 weeks of treatment. Expected improvement is 5 points with SD of changes = 10 (d = 0.5). With 80% power and alpha = 0.05, how many patients do I need?",
      "expected_template": "paired_ttest",
      "ground_truth": {
        "sample_size": 34,
        "effect_size_d": 0.5,
        "power": 0.8,
        "alpha": 0.05
      },
      "tolerance": {
        "sample_size": 3,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\npwr.t.test(d = 0.5, sig.level = 0.05, power = 0.80, type = 'paired')\n# n = 33.37, round up to 34"
    },
    {
      "id": "t1-paired-002",
      "template": "paired_ttest",
      "difficulty": "basic",
      "question": "Pre-post study measuring weight loss. Expected loss of 3 kg with SD of differences = 5 kg. Need 90% power, alpha = 0.05. How many subjects?",
      "expected_template": "paired_ttest",
      "ground_truth": {
        "sample_size": 32,
        "effect_size_d": 0.6,
        "power": 0.9,
        "alpha": 0.05
      },
      "tolerance": {
        "sample_size": 3,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\nd <- 3/5  # effect size = 0.6\npwr.t.test(d = 0.6, sig.level = 0.05, power = 0.90, type = 'paired')\n# n = 31.15, round up to 32"
    },
    {
      "id": "t1-paired-003",
      "template": "paired_ttest",
      "difficulty": "intermediate",
      "question": "Crossover study comparing two formulations of a drug. Expected difference in AUC is 50 with within-subject SD of 100. Using alpha = 0.05 and 85% power, calculate the number of subjects needed.",
      "expected_template": "paired_ttest",
      "ground_truth": {
        "sample_size": 38,
        "effect_size_d": 0.5,
        "power": 0.85,
        "alpha": 0.05
      },
      "tolerance": {
        "sample_size": 3,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\nd <- 50/100  # effect size = 0.5\npwr.t.test(d = 0.5, sig.level = 0.05, power = 0.85, type = 'paired')\n# n = 37.99, round up to 38"
    },
    {
      "id": "t1-paired-004",
      "template": "paired_ttest",
      "difficulty": "advanced",
      "question": "Bioequivalence crossover study. Need to detect d = 0.25 difference with 95% power and alpha = 0.01. How many subjects for this paired design?",
      "expected_template": "paired_ttest",
      "ground_truth": {
        "sample_size": 289,
        "effect_size_d": 0.25,
        "power": 0.95,
        "alpha": 0.01
      },
      "tolerance": {
        "sample_size": 14,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\npwr.t.test(d = 0.25, sig.level = 0.01, power = 0.95, type = 'paired')\n# n = 288.31, round up to 289"
    },
    {
      "id": "t1-anova-001",
      "template": "one_way_anova",
      "difficulty": "basic",
      "question": "Comparing 3 treatment groups for pain relief. I expect a medium effect size (f = 0.25). With 80% power and alpha = 0.05, how many subjects per group?",
      "expected_template": "one_way_anova",
      "ground_truth": {
        "sample_size_per_group": 53,
        "total_sample_size": 159,
        "effect_size_f": 0.25,
        "power": 0.8,
        "alpha": 0.05,
        "groups": 3
      },
      "tolerance": {
        "sample_size": 10,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\npwr.anova.test(k = 3, f = 0.25, sig.level = 0.05, power = 0.80)\n# n = 52.40 per group, round up to 53"
    },
    {
      "id": "t1-anova-002",
      "template": "one_way_anova",
      "difficulty": "basic",
      "question": "Testing 4 different dosage levels of a medication. Want to detect f = 0.30 effect with 80% power, alpha = 0.05. How many per dosage group?",
      "expected_template": "one_way_anova",
      "ground_truth": {
        "sample_size_per_group": 32,
        "total_sample_size": 128,
        "effect_size_f": 0.3,
        "power": 0.8,
        "alpha": 0.05,
        "groups": 4
      },
      "tolerance": {
        "sample_size": 10,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\npwr.anova.test(k = 4, f = 0.30, sig.level = 0.05, power = 0.80)\n# n = 31.28 per group, round up to 32"
    },
    {
      "id": "t1-anova-003",
      "template": "one_way_anova",
      "difficulty": "intermediate",
      "question": "Comparing 5 different exercise interventions for VO2max improvement. Expected effect f = 0.20 (small-medium). Need 90% power with alpha = 0.05.",
      "expected_template": "one_way_anova",
      "ground_truth": {
        "sample_size_per_group": 78,
        "total_sample_size": 390,
        "effect_size_f": 0.2,
        "power": 0.9,
        "alpha": 0.05,
        "groups": 5
      },
      "tolerance": {
        "sample_size": 10,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\npwr.anova.test(k = 5, f = 0.20, sig.level = 0.05, power = 0.90)\n# n = 77.77 per group, round up to 78"
    },
    {
      "id": "t1-anova-004",
      "template": "one_way_anova",
      "difficulty": "intermediate",
      "question": "Three diet groups being compared for LDL cholesterol reduction. Group means expected: -10, -20, -25 mg/dL with common SD = 20. Calculate sample size for 80% power, alpha = 0.05.",
      "expected_template": "one_way_anova",
      "ground_truth": {
        "sample_size_per_group": 35,
        "total_sample_size": 105,
        "effect_size_f": 0.312,
        "power": 0.8,
        "alpha": 0.05,
        "groups": 3
      },
      "tolerance": {
        "sample_size": 10,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\n# Calculate f from group means\nmeans <- c(-10, -20, -25)\ngrand_mean <- mean(means)\nbetween_var <- sum((means - grand_mean)^2) / 3\nf <- sqrt(between_var) / 20  # f = 0.312\npwr.anova.test(k = 3, f = 0.312, sig.level = 0.05, power = 0.80)\n# n = 34.15 per group, round up to 35"
    },
    {
      "id": "t1-anova-005",
      "template": "one_way_anova",
      "difficulty": "advanced",
      "question": "Large-scale trial comparing 6 treatment centers. Expect large effect (f = 0.40) but need 95% power due to regulatory requirements. Alpha = 0.01.",
      "expected_template": "one_way_anova",
      "ground_truth": {
        "sample_size_per_group": 29,
        "total_sample_size": 174,
        "effect_size_f": 0.4,
        "power": 0.95,
        "alpha": 0.01,
        "groups": 6
      },
      "tolerance": {
        "sample_size": 10,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\npwr.anova.test(k = 6, f = 0.40, sig.level = 0.01, power = 0.95)\n# n = 28.23 per group, round up to 29"
    },
    {
      "id": "t1-prop-001",
      "template": "two_proportions",
      "difficulty": "basic",
      "question": "Comparing response rates: control group expected 40%, treatment group expected 60%. Need 80% power, alpha = 0.05, two-sided. Sample size per group?",
      "expected_template": "two_proportions",
      "ground_truth": {
        "sample_size_per_group": 97,
        "total_sample_size": 194,
        "p1": 0.4,
        "p2": 0.6,
        "power": 0.8,
        "alpha": 0.05
      },
      "tolerance": {
        "sample_size": 10,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\nh <- ES.h(0.60, 0.40)  # h = 0.4028\npwr.2p.test(h = h, sig.level = 0.05, power = 0.80)\n# n = 96.70 per group, round up to 97"
    },
    {
      "id": "t1-prop-002",
      "template": "two_proportions",
      "difficulty": "basic",
      "question": "Drug A has 30% adverse event rate, we hope Drug B reduces it to 20%. With 80% power and alpha = 0.05 (two-sided), how many per arm?",
      "expected_template": "two_proportions",
      "ground_truth": {
        "sample_size_per_group": 292,
        "total_sample_size": 584,
        "p1": 0.3,
        "p2": 0.2,
        "power": 0.8,
        "alpha": 0.05
      },
      "tolerance": {
        "sample_size": 29,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\nh <- ES.h(0.30, 0.20)  # h = 0.2319\npwr.2p.test(h = h, sig.level = 0.05, power = 0.80)\n# n = 291.20 per group, round up to 292"
    },
    {
      "id": "t1-prop-003",
      "template": "two_proportions",
      "difficulty": "intermediate",
      "question": "Vaccine efficacy study: placebo infection rate 10%, vaccine expected 5%. Need 90% power, one-sided alpha = 0.025. Calculate per-group sample size.",
      "expected_template": "two_proportions",
      "ground_truth": {
        "sample_size_per_group": 582,
        "total_sample_size": 1164,
        "p1": 0.1,
        "p2": 0.05,
        "power": 0.9,
        "alpha": 0.025
      },
      "tolerance": {
        "sample_size": 58,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "power.prop.test(p1 = 0.10, p2 = 0.05, power = 0.90, sig.level = 0.025, alternative = 'one.sided')\n# n = 581.02 per group, round up to 582"
    },
    {
      "id": "t1-prop-004",
      "template": "two_proportions",
      "difficulty": "intermediate",
      "question": "Comparing surgical success rates: standard technique 85%, new technique expected 95%. Using 80% power and alpha = 0.05, calculate sample size per group.",
      "expected_template": "two_proportions",
      "ground_truth": {
        "sample_size_per_group": 133,
        "total_sample_size": 266,
        "p1": 0.85,
        "p2": 0.95,
        "power": 0.8,
        "alpha": 0.05
      },
      "tolerance": {
        "sample_size": 13,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\nh <- ES.h(0.95, 0.85)  # h = 0.3440\npwr.2p.test(h = h, sig.level = 0.05, power = 0.80)\n# n = 132.20 per group, round up to 133"
    },
    {
      "id": "t1-prop-005",
      "template": "two_proportions",
      "difficulty": "advanced",
      "question": "Non-inferiority trial: standard treatment 70% response, new treatment assumed same but need to rule out >10% worse (lower bound 60%). Alpha = 0.025 one-sided, 90% power.",
      "expected_template": "two_proportions",
      "ground_truth": {
        "sample_size_per_group": 477,
        "total_sample_size": 954,
        "p1": 0.7,
        "p2": 0.6,
        "power": 0.9,
        "alpha": 0.025
      },
      "tolerance": {
        "sample_size": 48,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "power.prop.test(p1 = 0.70, p2 = 0.60, power = 0.90, sig.level = 0.025, alternative = 'one.sided')\n# n = 476.68 per group, round up to 477"
    },
    {
      "id": "t1-chi-001",
      "template": "chi_square",
      "difficulty": "basic",
      "question": "Testing independence in a 2x2 contingency table. Want 80% power to detect medium effect (w = 0.3) with alpha = 0.05. What total sample size?",
      "expected_template": "chi_square_test",
      "ground_truth": {
        "total_sample_size": 88,
        "effect_size_w": 0.3,
        "power": 0.8,
        "alpha": 0.05,
        "df": 1
      },
      "tolerance": {
        "sample_size": 10,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\npwr.chisq.test(w = 0.3, df = 1, sig.level = 0.05, power = 0.80)\n# N = 87.21, round up to 88"
    },
    {
      "id": "t1-chi-002",
      "template": "chi_square",
      "difficulty": "basic",
      "question": "Chi-square test for 3x2 table (3 treatment groups, 2 outcomes). Detect w = 0.25 with 80% power, alpha = 0.05. Total N needed?",
      "expected_template": "chi_square_test",
      "ground_truth": {
        "total_sample_size": 155,
        "effect_size_w": 0.25,
        "power": 0.8,
        "alpha": 0.05,
        "df": 2
      },
      "tolerance": {
        "sample_size": 16,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\npwr.chisq.test(w = 0.25, df = 2, sig.level = 0.05, power = 0.80)\n# N = 154.30, round up to 155"
    },
    {
      "id": "t1-chi-003",
      "template": "chi_square",
      "difficulty": "intermediate",
      "question": "Testing association in a 3x4 contingency table. Want to detect w = 0.3 effect with 80% power, alpha = 0.05. What's the required total sample?",
      "expected_template": "chi_square_test",
      "ground_truth": {
        "total_sample_size": 152,
        "effect_size_w": 0.3,
        "power": 0.8,
        "alpha": 0.05,
        "df": 6
      },
      "tolerance": {
        "sample_size": 15,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\n# df = (3-1)*(4-1) = 6\npwr.chisq.test(w = 0.3, df = 6, sig.level = 0.05, power = 0.80)\n# N = 151.40, round up to 152"
    },
    {
      "id": "t1-chi-004",
      "template": "chi_square",
      "difficulty": "intermediate",
      "question": "4x4 table analyzing genotype-phenotype association. Need to detect small effect (w = 0.2) with 90% power, alpha = 0.01.",
      "expected_template": "chi_square_test",
      "ground_truth": {
        "total_sample_size": 654,
        "effect_size_w": 0.2,
        "power": 0.9,
        "alpha": 0.01,
        "df": 9
      },
      "tolerance": {
        "sample_size": 65,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\n# df = (4-1)*(4-1) = 9\npwr.chisq.test(w = 0.2, df = 9, sig.level = 0.01, power = 0.90)\n# N = 653.06, round up to 654"
    },
    {
      "id": "t1-chi-005",
      "template": "chi_square",
      "difficulty": "advanced",
      "question": "Goodness-of-fit test with 5 categories. Expected vs observed distribution to detect w = 0.35 with 85% power at alpha = 0.05.",
      "expected_template": "chi_square_test",
      "ground_truth": {
        "total_sample_size": 110,
        "effect_size_w": 0.35,
        "power": 0.85,
        "alpha": 0.05,
        "df": 4
      },
      "tolerance": {
        "sample_size": 11,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\n# df = 5 - 1 = 4 for goodness-of-fit\npwr.chisq.test(w = 0.35, df = 4, sig.level = 0.05, power = 0.85)\n# N = 109.36, round up to 110"
    },
    {
      "id": "t1-corr-001",
      "template": "correlation",
      "difficulty": "basic",
      "question": "Testing if BMI correlates with blood pressure. Expect medium correlation r = 0.3. With 80% power and alpha = 0.05 (two-sided), how many subjects?",
      "expected_template": "correlation",
      "ground_truth": {
        "sample_size": 85,
        "correlation_r": 0.3,
        "power": 0.8,
        "alpha": 0.05
      },
      "tolerance": {
        "sample_size": 4,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\npwr.r.test(r = 0.3, sig.level = 0.05, power = 0.80)\n# n = 84.07, round up to 85"
    },
    {
      "id": "t1-corr-002",
      "template": "correlation",
      "difficulty": "basic",
      "question": "Investigating correlation between age and cognitive decline score. Expecting r = 0.25. Need 90% power, alpha = 0.05.",
      "expected_template": "correlation",
      "ground_truth": {
        "sample_size": 164,
        "correlation_r": 0.25,
        "power": 0.9,
        "alpha": 0.05
      },
      "tolerance": {
        "sample_size": 8,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\npwr.r.test(r = 0.25, sig.level = 0.05, power = 0.90)\n# n = 163.05, round up to 164"
    },
    {
      "id": "t1-corr-003",
      "template": "correlation",
      "difficulty": "intermediate",
      "question": "Testing biomarker-outcome correlation. We expect a small correlation (r = 0.15) and need 80% power. Using alpha = 0.05, what sample size?",
      "expected_template": "correlation",
      "ground_truth": {
        "sample_size": 346,
        "correlation_r": 0.15,
        "power": 0.8,
        "alpha": 0.05
      },
      "tolerance": {
        "sample_size": 17,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\npwr.r.test(r = 0.15, sig.level = 0.05, power = 0.80)\n# n = 345.68, round up to 346"
    },
    {
      "id": "t1-corr-004",
      "template": "correlation",
      "difficulty": "intermediate",
      "question": "Strong correlation expected between exercise frequency and VO2max (r = 0.5). Need 95% power with alpha = 0.01. Sample size?",
      "expected_template": "correlation",
      "ground_truth": {
        "sample_size": 62,
        "correlation_r": 0.5,
        "power": 0.95,
        "alpha": 0.01
      },
      "tolerance": {
        "sample_size": 3,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\npwr.r.test(r = 0.5, sig.level = 0.01, power = 0.95)\n# n = 61.35, round up to 62"
    },
    {
      "id": "t1-corr-005",
      "template": "correlation",
      "difficulty": "advanced",
      "question": "One-sided test for positive correlation between medication adherence and health outcomes. Expecting r = 0.2, need 85% power, alpha = 0.025.",
      "expected_template": "correlation",
      "ground_truth": {
        "sample_size": 221,
        "correlation_r": 0.2,
        "power": 0.85,
        "alpha": 0.025
      },
      "tolerance": {
        "sample_size": 11,
        "power": 0.03
      },
      "source": "pwr package CRAN vignette",
      "reference_code": "library(pwr)\npwr.r.test(r = 0.2, sig.level = 0.025, power = 0.85, alternative = 'greater')\n# n = 220.28, round up to 221"
    }
  ]
}
