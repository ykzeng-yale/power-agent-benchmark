You can do this in two steps:

## 1) Required **number of primary events** (Schoenfeld)

For a 2-arm trial with equal allocation, the Schoenfeld approximation for the required number of **primary (cause-specific) events** is

[
D ;=;\frac{(z_{1-\alpha/2}+z_{1-\beta})^2}{{\log(HR)}^2 ; p(1-p)}
]
with (p=0.5\Rightarrow p(1-p)=0.25).

* (\alpha=0.05 \Rightarrow z_{1-\alpha/2}=1.96)
* Power (=0.80 \Rightarrow z_{1-\beta}=0.84)
* (HR=0.7 \Rightarrow \log(HR)=\log(0.7)=-0.3567)

Compute:

* ((1.96+0.84)^2 = (2.80)^2 = 7.84)
* ((\log 0.7)^2 = 0.3567^2 \approx 0.1272)

[
D \approx \frac{7.84}{0.1272\times 0.25}=\frac{7.84}{0.0318}\approx 246.6
]

So you need about **247 primary events**.

## 2) Convert events → sample size using the expected primary-event probability

You gave:

* control primary event rate (=30%)
* competing event rate (=15%) (independent of treatment)

To convert (D) to (N), we need the **average probability of observing the primary event** across arms during follow-up.

A common approximation (assuming proportional hazards and same follow-up window) is:

* From control primary event probability (P_c=0.30), the corresponding cumulative hazard is
  [
  H_c = -\ln(1-P_c) = -\ln(0.70)=0.3567
  ]
* Treatment cumulative hazard (H_t = HR\cdot H_c = 0.7\cdot 0.3567=0.2497)
* Treatment primary event probability
  [
  P_t = 1-e^{-H_t}=1-e^{-0.2497}\approx 0.221
  ]
* Average primary event probability
  [
  \bar P = (P_c+P_t)/2 \approx (0.30+0.221)/2 = 0.2605
  ]

Then:
[
N_{\text{total}} \approx \frac{D}{\bar P} = \frac{247}{0.2605}\approx 949
]
So **~949 total**, i.e. **~475 per arm**.

---

## A note about the “15% competing event” and an alternate interpretation

If your “30% control event rate” is what you’d see **in the absence of competing events**, and the competing event effectively removes ~15% of patients from ever having the primary event observed, a rough adjustment is multiplying primary-event probabilities by (0.85):

* (P_c^* = 0.30\times 0.85 = 0.255)
* (P_t^* \approx 0.221\times 0.85 = 0.188)
* (\bar P^*\approx (0.255+0.188)/2=0.2215)

Then:
[
N_{\text{total}} \approx \frac{247}{0.2215}\approx 1116
]
So **~1116 total**, i.e. **~558 per arm**.

---

### Bottom line (most typical reading)

* If **30% is the cumulative incidence of the primary event under control** over your planned follow-up (with competing risks occurring separately): **~475 per arm**.
* If **30% is the “latent” primary event rate without competing risks** and 15% competing effectively reduces observed primary events: **~560 per arm**.

If you tell me which definition matches your “30%” (cumulative incidence with competing risks present vs not), I’ll lock to one number.
